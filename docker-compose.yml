version: '3.8'
services:
  browser-rbi:
    build: .
    image: remote-browser:latest
    container_name: rbi_container
    # 关键：共享宿主机内存空间，避免容器内 OOM 限制过严
    shm_size: '1gb'
    ports:
      - "3389:3389"
    restart: always
    # 资源限制（可选，但在 1C1G 机器上可以不写，让它抢占所有资源）
    deploy:
      resources:
        limits:
          cpus: '1.0'
          memory: 900M
    cap_add:
      - SYS_ADMIN
    security_opt:
      - seccomp=unconfined