; Minimal xrdp.ini for Debian Bookworm (Xorg backend, low CPU/bandwidth)

[Globals]
address=0.0.0.0
port=3389
fork=true
; allow TLS/NLA when client supports it
security_layer=negotiate
crypt_level=high

; reduce bandwidth/CPU
max_bpp=16
xserverbpp=16

; TCP tweaks
tcp_nodelay=true
tcp_keepalive=true
bitmap_compression=true
bulk_compression=true

autorun=Xorg

[SessionTypes]
Xorg=Xorg

; Xorg backend
; NOTE:
; - We set lib=libxup.so on purpose so xrdp can dlopen() a valid backend .so
;   and pass its pre-check without errors. The real Xorg display server is still
;   started by sesman according to sesman.ini [Xorg] parameters, not by this .so.
; - Do NOT link /usr/lib/xorg/modules/libxorgxrdp.so into xrdp module dir. That
;   file is an Xorg driver (different ABI) and will break xrdp if dlopen() succeeds.
[Xorg]
name=Xorg
lib=libxup.so
username=ask
password=ask
ip=127.0.0.1
port=-1
code=20

; Channels: keep clipboard only to reduce chansrv load
[Channels]
cliprdr=true
drdynvc=false
rdpdr=false
rdpsnd=false
rail=false